# Template file for 'reproc'
pkgname=reproc
version=14.2.5
revision=1
build_style=cmake
configure_args="-DBUILD_SHARED_LIBS=ON -DREPROC++=ON"
short_desc="Cross-platform C99/C++11 process library"
maintainer="Nicolas Porcel <nicolasporcel06@gmail.com>"
license="GPL-3.0-or-later"
homepage="https://github.com/DaanDeMeyer/reproc"
distfiles="https://github.com/DaanDeMeyer/reproc/archive/refs/tags/v${version}.tar.gz"
checksum=@24f06d6ff393ed89400ee1d5aaff7ba97cf2a996c031083bde613ce937d9f163

reproc-devel_package() {
	short_desc+=" (development files)"
	depends="${sourcepkg}>=${version}_${revision}"
	pkg_install() {
		vmove usr/include/reproc
		vmove usr/lib/cmake/reproc
		vmove usr/lib/pkgconfig/reproc.pc
		vmove usr/lib/libreproc.so
	}
}

reproc++_package() {
	depends="${sourcepkg}>=${version}_${revision}"
	pkg_install() {
		vmove usr/lib/libreproc++.so.*
	}
}

reproc++-devel_package() {
	short_desc="${short_desc} (development files)"
	depends="${sourcepkg}-devel>=${version}_${revision} ${sourcepkg}++>=${version}_${revision}"
	pkg_install() {
		vmove usr/include/reproc++
		vmove usr/lib/cmake/reproc++
		vmove usr/lib/pkgconfig/reproc++.pc
		vmove usr/lib/libreproc++.so
	}
}
